id: PYSEC-0000-CVE-2021-21273
package:
  name: matrix-synapse
  ecosystem: PyPI
details: Synapse is a Matrix reference homeserver written in python (pypi package
  matrix-synapse). Matrix is an ecosystem for open federated Instant Messaging and
  VoIP. In Synapse before version 1.25.0, requests to user provided domains were not
  restricted to external IP addresses when calculating the key validity for third-party
  invite events and sending push notifications. This could cause Synapse to make requests
  to internal infrastructure. The type of request was not controlled by the user,
  although limited modification of request bodies was possible. For the most thorough
  protection server administrators should remove the deprecated `federation_ip_range_blacklist`
  from their settings after upgrading to Synapse v1.25.0 which will result in Synapse
  using the improved default IP address restrictions. See the new `ip_range_blacklist`
  and `ip_range_whitelist` settings if more specific control is necessary.
affects:
  ranges:
  - type: GIT
    repo: https://github.com/matrix-org/synapse
    fixed: 30fba6210834a4ecd91badf0c8f3eb278b72e746
  - type: ECOSYSTEM
    fixed: 1.25.0
references:
- type: WEB
  url: https://github.com/matrix-org/synapse/releases/tag/v1.25.0
- type: WEB
  url: https://github.com/matrix-org/synapse/commit/30fba6210834a4ecd91badf0c8f3eb278b72e746
- type: WEB
  url: https://github.com/matrix-org/synapse/security/advisories/GHSA-v936-j8gp-9q3p
- type: WEB
  url: https://github.com/matrix-org/synapse/pull/8821
aliases:
- CVE-2021-21273
modified: "2021-03-05T18:03:00Z"
published: "2021-02-26T18:15:00Z"
